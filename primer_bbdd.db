CREATE DATABASE primer_bbdd;

CREATE TABLE STUDENTS (
  STUDENTID INT PRIMARY KEY,
  FIRSTNAME VARCHAR(50),
  LASTNAME VARCHAR(50),
  AGE INT,
  EMAIL VARCHAR(100),
  LOADDATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UPDATEDATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE INSTRUCTORS (
  INSTRUCTORID INT PRIMARY KEY,
  FIRSTNAME VARCHAR(50),
  LASTNAME VARCHAR(50),
  EMAIL VARCHAR(100) UNIQUE,
  SPECIALIZATION VARCHAR(100),
  HIREDATE DATE,
  LOAD_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE COURSES (
  COURSEID INT PRIMARY KEY,
  COURSENAME VARCHAR(100),
  DESCRIPTION TEXT,
  INSTRUCTORID INT,
  DURATIONHOURS INT,
  LOAD_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (INSTRUCTORID) REFERENCES INSTRUCTORS(INSTRUCTORID)
);

CREATE TABLE STUDENT_COURSES (
  STUDENTID INT,
  COURSEID INT,
  ENROLLMENT_DATE DATE DEFAULT CURRENT_DATE,
  STATUS VARCHAR(20) DEFAULT 'ACTIVE',
  LOAD_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (STUDENTID, COURSEID),
  FOREIGN KEY (STUDENTID) REFERENCES STUDENTS(STUDENTID),
  FOREIGN KEY (COURSEID) REFERENCES COURSES(COURSEID)
);
